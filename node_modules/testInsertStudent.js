// Carrega variáveis de ambiente do arquivo .env
require('dotenv').config();
const mongoose = require('mongoose');
const Student = require('./models/student'); // importa o modelo Student

// Conecta ao MongoDB
mongoose.connect(process.env.MONGO_URI)
  .then(async () => {
    console.log('✅ Conexão com MongoDB estabelecida!');

    // Cria um aluno fake para teste
    const alunoFake = new Student({
      nome: 'João Teste',
      cpf: '000.000.000-00',
      cep: '00000-000',
      endereco: 'Rua Avenida',
      numero: '000',
      complemento: ' ',
      bairro: 'Centro',
      cidade: 'São Paulo',
      estado: 'SP',
      curso: 'Inglês'
      
      
    });

    try {
      // Salva o aluno no banco
      const alunoSalvo = await alunoFake.save();
      console.log('✅ Aluno inserido com sucesso:', alunoSalvo);
    } catch (err) {
      console.error('❌ Erro ao salvar aluno:', err.message);
    } finally {
      // Fecha a conexão com o banco
      await mongoose.connection.close();
    }
  })
  .catch(err => console.error('❌ Erro ao conectar MongoDB:', err));
